<% layout("/layouts/boilerplate.ejs") %>



    <div class="form-container">
        <form class="contact-form" method="POST" action="/home/add-contact" enctype="multipart/form-data">
            <div class="form-group">
                <label for="name">Full Name</label>
                <input type="text" id="name" name="name" placeholder="Enter name" required />
            </div>

            <div class="form-group">
                <label for="phoneNumber">Phone Number</label>
                <input type="number" id="phoneNumber" name="number" placeholder="Enter phone number" required />
            </div>

            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" name="email" placeholder="Enter email" required pattern="^[a-zA-Z0-9._%+-]+@(gmail\.com|yahoo\.com|hotmail\.com|outlook\.com)$" title="Only Gmail, Yahoo, Hotmail, and Outlook email addresses are allowed." />

            </div>

            <div class="form-group">
                <label for="photo">Upload Photo</label>
                <input type="file" id="photo" name="photo" accept="image/*" />
            </div>

            <div class="form-group">
                <label for="address">Address</label>
                <input type="text" id="address" name="address" placeholder="Enter address" />
            </div>

            <div class="form-group">
                <label for="birthday">Birthday</label>
                <input type="date" id="birthday" name="bday" />
            </div>

            <div class="form-group">
                <label for="relation">Relation</label>
                <input type="text" id="relation" name="relation" placeholder="e.g. Friend, Colleague, Family" />
            </div>

            <div class="form-group">
                <label for="gender">Gender</label>
                <select id="gender" name="gender">
                    <option value="" disabled selected>Select gender</option>
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="nonbinary">Non-binary</option>
                    <option value="other">Other</option>
                </select>
            </div>

            <div class="form-group">
                <label for="city">City</label>
                <input type="text" id="city" name="city" placeholder="Enter city" />
            </div>

            <div class="form-group">
                <label for="country">Country</label>
                <input type="text" id="country" name="country" placeholder="Enter country" />
            </div>

            <button type="submit" class="add-contact-btn">Add Contact</button>
        </form>
    </div>

    <script>
        const emailInput = document.getElementById("email");

        emailInput.addEventListener("input", function() {
            const allowedDomains = ["gmail.com", "yahoo.com", "hotmail.com", "outlook.com"];
            const emailValue = emailInput.value.trim();
            const domain = emailValue.split("@")[1];

            // remove any existing warning
            const oldWarning = document.getElementById("email-warning");
            if (oldWarning) oldWarning.remove();

            if (domain && !allowedDomains.includes(domain)) {
                const warning = document.createElement("p");
                warning.textContent = "Only Gmail, Yahoo, Hotmail, and Outlook emails are accepted.";
                warning.style.color = "red";
                warning.style.fontSize = "0.9em";
                warning.id = "email-warning";
                emailInput.insertAdjacentElement("afterend", warning);
            }
        });
    </script>